<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>ThinkTalk Mobile</title>
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

<!-- Firebase compat (m√™me projet que ThinkTalk PC) -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

<style>
*{box-sizing:border-box;margin:0;padding:0}
html,body{
  height:100%;
}
body{
  font-family:system-ui,Arial;
  background:radial-gradient(circle at top,#051933 0,#000 55%,#000 100%);
  color:#d0e7ff;
  display:flex;
  justify-content:center;
  align-items:stretch;
}

/* CONTAINER PRINCIPAL MOBILE */
#app{
  position:relative;
  width:100%;
  max-width:480px;
  height:100vh;
  background:radial-gradient(circle at top left,rgba(0,153,255,.25),rgba(0,0,0,.95));
  border-left:1px solid rgba(0,153,255,.6);
  border-right:1px solid rgba(0,153,255,.6);
  box-shadow:0 0 30px rgba(0,153,255,.7),0 0 80px rgba(0,0,0,.9);
  overflow:hidden;
}

/* HEADER */
#topBar{
  height:52px;
  padding:0 10px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  border-bottom:1px solid rgba(0,153,255,.5);
  background:linear-gradient(135deg,rgba(0,0,0,.9),rgba(0,51,102,.9));
}
#menuBtn{
  width:34px;
  height:34px;
  border-radius:50%;
  border:1px solid rgba(0,153,255,.8);
  background:radial-gradient(circle at top left,rgba(0,51,102,.9),rgba(0,0,0,.95));
  display:flex;
  align-items:center;
  justify-content:center;
  color:#7fc4ff;
  font-size:18px;
  cursor:pointer;
  box-shadow:0 0 10px rgba(0,153,255,.6);
}
#topTitle{
  display:flex;
  flex-direction:column;
  gap:2px;
}
#appName{
  font-size:17px;
  color:#7fc4ff;
  text-shadow:0 0 10px rgba(0,153,255,.8);
}
#currentContext{
  font-size:12px;
  color:#bcd9ff;
  opacity:.85;
}
#userInfo{
  font-size:11px;
  color:#9fb7ff;
  max-width:90px;
  text-align:right;
}

/* SIDEBAR MOBILE (SLIDE LEFT) */
#sidebarOverlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  display:none;
  z-index:20;
}
#sidebar{
  position:absolute;
  top:0;
  left:0;
  width:260px;
  height:100%;
  background:rgba(3,10,25,.96);
  border-right:1px solid rgba(0,153,255,.6);
  box-shadow:0 0 20px rgba(0,153,255,.7);
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:10px;
  transform:translateX(-100%);
  transition:transform .22s ease-out;
}
#sidebar.open{
  transform:translateX(0);
}
#sidebar h3{
  font-size:12px;
  text-transform:uppercase;
  letter-spacing:1px;
  color:#6fb6ff;
  margin-bottom:4px;
}
.list{
  display:flex;
  flex-direction:column;
  gap:4px;
  max-height:32%;
  overflow-y:auto;
  padding-right:4px;
}
.item{
  padding:7px 9px;
  border-radius:8px;
  border:1px solid rgba(0,153,255,.5);
  background:linear-gradient(135deg,rgba(0,102,204,.15),rgba(0,0,0,.8));
  font-size:13px;
  color:#d0e7ff;
  cursor:pointer;
  display:flex;
  justify-content:space-between;
  transition:.15s;
}
.item:hover{
  background:linear-gradient(135deg,rgba(0,153,255,.3),rgba(0,0,0,.95));
  transform:translateY(-1px);
  box-shadow:0 0 10px rgba(0,153,255,.5);
}
.item.active{
  background:linear-gradient(135deg,rgba(0,153,255,.45),rgba(0,0,0,.95));
  box-shadow:0 0 12px rgba(0,153,255,.8);
}
#addContactBtn,#logoutBtn{
  padding:8px 9px;
  border-radius:999px;
  border:1px solid rgba(0,153,255,.7);
  background:radial-gradient(circle at top left,rgba(0,153,255,.4),rgba(0,0,0,.95));
  color:#e5f2ff;
  font-size:13px;
  cursor:pointer;
  transition:.15s;
}
#logoutBtn{
  margin-top:auto;
  border-color:rgba(255,80,80,.9);
  background:radial-gradient(circle at top left,rgba(255,80,80,.9),rgba(0,0,0,.95));
}

/* CONTENU PRINCIPAL */
#main{
  position:absolute;
  top:52px;
  left:0;
  right:0;
  bottom:56px; /* place pour la barre du bas */
  display:flex;
  flex-direction:column;
}

/* ZONE MESSAGES */
#messages{
  flex:1;
  padding:8px 10px 6px;
  overflow-y:auto;
  border-bottom:1px solid rgba(0,153,255,.4);
}
.msg{
  margin-bottom:6px;
  padding:6px 8px;
  border-radius:9px;
  background:linear-gradient(135deg,rgba(0,0,0,.9),rgba(0,153,255,.18));
  border-left:3px solid rgba(0,153,255,.8);
  position:relative;
  animation:msgIn .18s ease-out;
}
@keyframes msgIn{
  from{transform:translateY(4px);opacity:0}
  to{transform:translateY(0);opacity:1}
}
.msg-header{
  display:flex;
  justify-content:space-between;
  font-size:11px;
  margin-bottom:2px;
}
.pseudo{
  font-weight:600;
  color:#7fc4ff;
  text-shadow:0 0 6px rgba(0,153,255,.8);
}
.time{
  color:#9fb7ff;
  opacity:.8;
  margin-left:6px;
}
.text{
  font-size:14px;
  color:#e5f2ff;
  white-space:pre-wrap;
}

/* BARRE D‚ÄôENTR√âE (MOBILE, CLAVIER) */
#inputBar{
  position:fixed;
  left:50%;
  transform:translateX(-50%);
  bottom:56px; /* juste au-dessus de la barre du bas */
  width:100%;
  max-width:480px;
  padding:6px 8px;
  background:linear-gradient(180deg,rgba(0,0,0,.95),rgba(0,0,0,.98));
  border-top:1px solid rgba(0,153,255,.5);
  display:flex;
  gap:6px;
  z-index:15;
}
#messageInput{
  flex:1;
  padding:9px 11px;
  border-radius:999px;
  border:1px solid rgba(0,153,255,.7);
  background:rgba(0,0,0,.9);
  color:#e5f2ff;
  font-size:14px;
}
#sendBtn{
  width:80px;
  border-radius:999px;
  border:1px solid rgba(0,204,255,.9);
  background:radial-gradient(circle at top left,rgba(0,204,255,.9),rgba(0,0,0,.95));
  color:#e5f2ff;
  font-size:14px;
  cursor:pointer;
}

/* BARRE DU BAS (NAVIGATION) */
#bottomBar{
  position:fixed;
  left:50%;
  transform:translateX(-50%);
  bottom:0;
  width:100%;
  max-width:480px;
  height:56px;
  background:linear-gradient(180deg,rgba(0,0,0,.96),rgba(0,0,0,1));
  border-top:1px solid rgba(0,153,255,.6);
  display:flex;
  align-items:center;
  justify-content:space-around;
  z-index:16;
}
.navBtn{
  flex:1;
  text-align:center;
  color:#9fb7ff;
  font-size:11px;
  cursor:pointer;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:2px;
}
.navIcon{
  font-size:17px;
}
.navBtn.active{
  color:#7fc4ff;
  text-shadow:0 0 8px rgba(0,153,255,.9);
}

/* OVERLAY AUTH */
#authOverlay{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:rgba(0,0,0,.9);
  z-index:30;
}
#authBox{
  width:90%;
  max-width:340px;
  padding:18px 16px;
  border-radius:18px;
  background:radial-gradient(circle at top left,rgba(0,153,255,.35),rgba(0,0,0,.95));
  border:1px solid rgba(0,204,255,.9);
  box-shadow:0 0 30px rgba(0,204,255,.8);
}
#authBox h2{
  font-size:18px;
  margin-bottom:8px;
}
#authBox input{
  width:100%;
  padding:9px 11px;
  margin:6px 0;
  border-radius:999px;
  border:1px solid rgba(0,153,255,.7);
  background:rgba(0,0,0,.9);
  color:#e5f2ff;
  font-size:14px;
}
#authBox button{
  width:100%;
  padding:9px 11px;
  margin-top:6px;
  border-radius:999px;
  border:1px solid rgba(0,204,255,.9);
  background:radial-gradient(circle at top left,rgba(0,204,255,.9),rgba(0,0,0,.95));
  color:#e5f2ff;
  font-size:14px;
  cursor:pointer;
}

/* MODAL (appui long, etc.) */
#modalOverlay{
  position:fixed;
  inset:0;
  display:none;
  align-items:flex-end;
  justify-content:center;
  background:rgba(0,0,0,.55);
  z-index:40;
}
#modal{
  width:100%;
  max-width:480px;
  border-radius:18px 18px 0 0;
  background:radial-gradient(circle at top,rgba(0,204,255,.35),rgba(0,0,0,.98));
  border-top:1px solid rgba(0,255,255,.9);
  padding:12px 14px 10px;
}
.modalTitle{
  font-size:14px;
  margin-bottom:6px;
  color:#e5f2ff;
}
.modalActions{
  display:flex;
  flex-direction:column;
  gap:6px;
}
.modalBtn{
  padding:9px 11px;
  border-radius:999px;
  border:1px solid rgba(0,153,255,.7);
  background:rgba(0,0,0,.9);
  color:#e5f2ff;
  font-size:14px;
  text-align:center;
  cursor:pointer;
}
.modalBtn.danger{
  border-color:rgba(255,80,80,.9);
  color:#ffd0d0;
}

/* TOAST */
#toast{
  position:fixed;
  bottom:70px;
  left:50%;
  transform:translateX(-50%);
  padding:7px 12px;
  border-radius:999px;
  background:rgba(0,0,0,.9);
  border:1px solid rgba(0,204,255,.8);
  color:#e5f2ff;
  font-size:12px;
  opacity:0;
  transition:.2s;
  z-index:50;
}
#toast.show{
  opacity:1;
}

/* PETITES ADAPTATIONS */
@media (max-width:360px){
  #appName{font-size:16px}
  #userInfo{font-size:10px}
}
</style>
</head>
<body>
<div id="app">

<!-- OVERLAY SIDEBAR -->
<div id="sidebarOverlay">
  <div id="sidebar">
    <h3>Salons publics</h3>
    <div id="publicList" class="list"></div>

    <h3>Contacts</h3>
    <div id="contactsList" class="list"></div>

    <button id="addContactBtn">Ajouter un contact</button>
    <button id="logoutBtn">Se d√©connecter</button>
  </div>
</div>

<!-- HEADER -->
<div id="topBar">
  <div id="menuBtn">‚ò∞</div>
  <div id="topTitle">
    <span id="appName">ThinkTalk Mobile</span>
    <span id="currentContext">Aucun salon s√©lectionn√©</span>
  </div>
  <div id="userInfo">Non connect√©</div>
</div>

<!-- MAIN -->
<div id="main">
  <div id="messages"></div>
</div>

<!-- BARRE D‚ÄôENTR√âE -->
<div id="inputBar">
  <input id="messageInput" placeholder="√âcris un message..." disabled>
  <button id="sendBtn" disabled>Envoyer</button>
</div>

<!-- BARRE DU BAS -->
<div id="bottomBar">
  <div class="navBtn active" data-view="home">
    <span class="navIcon">üè†</span>
    <span>Home</span>
  </div>
  <div class="navBtn" data-view="rooms">
    <span class="navIcon">#</span>
    <span>Salons</span>
  </div>
  <div class="navBtn" data-view="contacts">
    <span class="navIcon">üë§</span>
    <span>Contacts</span>
  </div>
</div>

<!-- AUTH -->
<div id="authOverlay">
  <div id="authBox">
    <h2>Connexion / Inscription</h2>
    <input id="authPseudo" placeholder="Pseudo">
    <input id="authCode" placeholder="Code secret (4 √† 8 chiffres)" type="password">
    <button id="registerBtn">Cr√©er un compte</button>
    <button id="loginBtn">Se connecter</button>
  </div>
</div>

<!-- MODAL (appui long) -->
<div id="modalOverlay">
  <div id="modal">
    <div class="modalTitle">Actions sur le message</div>
    <div class="modalActions" id="modalActions"></div>
  </div>
</div>

<div id="toast"></div>
<script>
// =========================
// CONFIG FIREBASE
// =========================
const firebaseConfig = {
  apiKey: "AIzaSyCrgPMXzSyS6NXNajPxr0x_J-CTESOtp5w",
  authDomain: "chat-github-6abb5.firebaseapp.com",
  databaseURL: "https://chat-github-6abb5-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "chat-github-6abb5",
  storageBucket: "chat-github-6abb5.firebasestorage.app",
  messagingSenderId: "1038562300660",
  appId: "1:1038562300660:web:b57b74a7539466e16384a1"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// =========================
// DOM
// =========================
const sidebarOverlay = document.getElementById("sidebarOverlay");
const sidebar = document.getElementById("sidebar");
const menuBtn = document.getElementById("menuBtn");

const publicList = document.getElementById("publicList");
const contactsList = document.getElementById("contactsList");

const addContactBtn = document.getElementById("addContactBtn");
const logoutBtn = document.getElementById("logoutBtn");

const messagesDiv = document.getElementById("messages");
const messageInput = document.getElementById("messageInput");
const sendBtn = document.getElementById("sendBtn");

const bottomBar = document.getElementById("bottomBar");
const navBtns = document.querySelectorAll(".navBtn");

const currentContextEl = document.getElementById("currentContext");
const userInfo = document.getElementById("userInfo");

const authOverlay = document.getElementById("authOverlay");
const authPseudoInput = document.getElementById("authPseudo");
const authCodeInput = document.getElementById("authCode");
const registerBtn = document.getElementById("registerBtn");
const loginBtn = document.getElementById("loginBtn");

const modalOverlay = document.getElementById("modalOverlay");
const modalActions = document.getElementById("modalActions");

const toast = document.getElementById("toast");

let currentUser = null;
let currentContext = null;
let longPressTimer = null;

// =========================
// UTILS
// =========================
function showToast(text){
  toast.textContent = text;
  toast.classList.add("show");
  setTimeout(()=>toast.classList.remove("show"),2000);
}

function formatTime(ts){
  const d = new Date(ts);
  return String(d.getHours()).padStart(2,"0")+":"+String(d.getMinutes()).padStart(2,"0");
}

function conversationId(a,b){
  return [a,b].sort().join("__");
}

// =========================
// SIDEBAR MOBILE
// =========================
menuBtn.onclick = () => {
  sidebarOverlay.style.display = "block";
  setTimeout(()=>sidebar.classList.add("open"),10);
};

sidebarOverlay.onclick = (e) => {
  if(e.target === sidebarOverlay){
    sidebar.classList.remove("open");
    setTimeout(()=>sidebarOverlay.style.display="none",200);
  }
};

// =========================
// AUTH
// =========================
async function finishLogin(pseudo){
  currentUser = pseudo;
  userInfo.textContent = pseudo;
  authOverlay.style.display = "none";

  messageInput.disabled = false;
  sendBtn.disabled = false;

  await ensureDefaultPublicRooms();
  await loadSidebar();
  selectRoom("general");
}

async function ensureDefaultPublicRooms(){
  const defaults = ["general","gaming","music"];
  for(const name of defaults){
    const ref = db.ref("publicRooms/"+name);
    const snap = await ref.get();
    if(!snap.exists()) await ref.set(true);
  }
}

async function register(){
  const pseudo = authPseudoInput.value.trim();
  const code = authCodeInput.value.trim();
  if(!pseudo || !code) return showToast("Pseudo et code obligatoires");
  if(code.length<4 || code.length>8) return showToast("Code = 4 √† 8 chiffres");

  const ref = db.ref("users/"+pseudo);
  const snap = await ref.get();
  if(snap.exists()) return showToast("Pseudo d√©j√† utilis√©");

  await ref.set({code});
  localStorage.setItem("ttm_pseudo",pseudo);
  localStorage.setItem("ttm_code",code);
  finishLogin(pseudo);
}

async function login(){
  const pseudo = authPseudoInput.value.trim();
  const code = authCodeInput.value.trim();
  if(!pseudo || !code) return showToast("Pseudo et code obligatoires");

  const ref = db.ref("users/"+pseudo);
  const snap = await ref.get();
  if(!snap.exists()) return showToast("Pseudo inconnu");

  if(snap.val().code !== code) return showToast("Code incorrect");

  localStorage.setItem("ttm_pseudo",pseudo);
  localStorage.setItem("ttm_code",code);
  finishLogin(pseudo);
}

async function autoLogin(){
  const p = localStorage.getItem("ttm_pseudo");
  const c = localStorage.getItem("ttm_code");
  if(!p || !c) return;

  const snap = await db.ref("users/"+p).get();
  if(!snap.exists()) return;
  if(snap.val().code !== c) return;

  finishLogin(p);
}

function logout(){
  localStorage.removeItem("ttm_pseudo");
  localStorage.removeItem("ttm_code");
  location.reload();
}

// =========================
// SIDEBAR LISTS
// =========================
async function loadSidebar(){
  publicList.innerHTML="";
  const roomsSnap = await db.ref("publicRooms").get();
  if(roomsSnap.exists()){
    Object.keys(roomsSnap.val()).forEach(name=>{
      const div=document.createElement("div");
      div.className="item";
      div.dataset.type="room";
      div.dataset.id=name;
      div.textContent="#"+name;
      div.onclick=()=>selectRoom(name);
      publicList.appendChild(div);
    });
  }

  contactsList.innerHTML="";
  const contactsSnap = await db.ref("contacts/"+currentUser).get();
  if(contactsSnap.exists()){
    Object.keys(contactsSnap.val()).forEach(contact=>{
      const div=document.createElement("div");
      div.className="item";
      div.dataset.type="dm";
      div.dataset.id=contact;
      div.textContent=contact;
      div.onclick=()=>selectDM(contact);
      contactsList.appendChild(div);
    });
  }

  updateSidebarActive();
}

function updateSidebarActive(){
  document.querySelectorAll(".item").forEach(i=>i.classList.remove("active"));
  if(!currentContext) return;

  if(currentContext.type==="room"){
    const el=[...publicList.children].find(e=>e.dataset.id===currentContext.id);
    if(el) el.classList.add("active");
  } else {
    const el=[...contactsList.children].find(e=>e.dataset.id===currentContext.other);
    if(el) el.classList.add("active");
  }
}

// =========================
// NAVIGATION BAS
// =========================
navBtns.forEach(btn=>{
  btn.onclick = () => {
    navBtns.forEach(b=>b.classList.remove("active"));
    btn.classList.add("active");

    const view = btn.dataset.view;

    if(view==="rooms"){
      sidebarOverlay.style.display="block";
      setTimeout(()=>sidebar.classList.add("open"),10);
    }
    if(view==="contacts"){
      sidebarOverlay.style.display="block";
      setTimeout(()=>sidebar.classList.add("open"),10);
    }
  };
});

// =========================
// CONTEXT
// =========================
function selectRoom(name){
  currentContext={type:"room",id:name,label:"#"+name};
  currentContextEl.textContent="#"+name;
  updateSidebarActive();
  attachMessagesListener();
}

function selectDM(other){
  const conv = conversationId(currentUser,other);
  currentContext={type:"dm",id:conv,label:other,other};
  currentContextEl.textContent=other;
  updateSidebarActive();
  attachMessagesListener();
}

// =========================
// MESSAGES
// =========================
function attachMessagesListener(){
  messagesDiv.innerHTML="";

  let path="";
  if(currentContext.type==="room"){
    path="messages/public/"+currentContext.id;
  } else {
    path="messages/dm/"+currentContext.id;
  }

  const ref = db.ref(path);
  ref.off();

  ref.on("child_added",snap=>{
    renderMessage(snap.key,snap.val());
  });

  ref.on("child_changed",snap=>{
    const el=document.getElementById("msg-"+snap.key);
    if(el){
      el.querySelector(".text").textContent = snap.val().text + (snap.val().edited?" (modifi√©)":"");
    }
  });

  ref.on("child_removed",snap=>{
    const el=document.getElementById("msg-"+snap.key);
    if(el) el.remove();
  });
}

function renderMessage(key,msg){
  const div=document.createElement("div");
  div.className="msg";
  div.id="msg-"+key;

  const header=document.createElement("div");
  header.className="msg-header";

  const left=document.createElement("div");
  left.innerHTML=`<span class="pseudo">${msg.pseudo}</span><span class="time">${formatTime(msg.timestamp)}</span>`;
  header.appendChild(left);

  const text=document.createElement("div");
  text.className="text";
  text.textContent=msg.text + (msg.edited?" (modifi√©)":"");

  div.appendChild(header);
  div.appendChild(text);

  // APPUI LONG
  div.addEventListener("touchstart",()=>{
    longPressTimer=setTimeout(()=>openMessageActions(key,msg),350);
  });
  div.addEventListener("touchend",()=>clearTimeout(longPressTimer));
  div.addEventListener("touchmove",()=>clearTimeout(longPressTimer));

  messagesDiv.appendChild(div);
  messagesDiv.scrollTop=messagesDiv.scrollHeight;
}

function getCurrentPath(){
  if(currentContext.type==="room"){
    return "messages/public/"+currentContext.id;
  }
  return "messages/dm/"+currentContext.id;
}

function sendMessage(){
  const text=messageInput.value.trim();
  if(!text) return;

  const path=getCurrentPath();
  db.ref(path).push({
    pseudo:currentUser,
    text,
    timestamp:Date.now(),
    edited:false
  });

  messageInput.value="";
}

// =========================
// APPUI LONG ‚Üí MENU ACTIONS
// =========================
function openMessageActions(key,msg){
  if(msg.pseudo !== currentUser) return;

  modalActions.innerHTML="";

  const editBtn=document.createElement("div");
  editBtn.className="modalBtn";
  editBtn.textContent="Modifier";
  editBtn.onclick=()=>editMessage(key,msg);

  const delBtn=document.createElement("div");
  delBtn.className="modalBtn danger";
  delBtn.textContent="Supprimer";
  delBtn.onclick=()=>deleteMessage(key);

  const cancelBtn=document.createElement("div");
  cancelBtn.className="modalBtn";
  cancelBtn.textContent="Annuler";
  cancelBtn.onclick=()=>modalOverlay.style.display="none";

  modalActions.appendChild(editBtn);
  modalActions.appendChild(delBtn);
  modalActions.appendChild(cancelBtn);

  modalOverlay.style.display="flex";
}

function editMessage(key,msg){
  modalOverlay.style.display="none";

  const newText = prompt("Modifier :", msg.text);
  if(!newText) return;

  const path=getCurrentPath()+"/"+key;
  db.ref(path).update({text:newText,edited:true});
}

async function deleteMessage(key){
  modalOverlay.style.display="none";
  const path=getCurrentPath()+"/"+key;
  await db.ref(path).remove();
}

// =========================
// CONTACTS
// =========================
function addContact(){
  const pseudo = prompt("Pseudo du contact :");
  if(!pseudo) return;
  if(pseudo===currentUser) return showToast("Impossible de te contacter toi-m√™me");

  db.ref("users/"+pseudo).get().then(snap=>{
    if(!snap.exists()) return showToast("Ce pseudo n'existe pas");

    db.ref("contacts/"+currentUser+"/"+pseudo).set(true);
    db.ref("contacts/"+pseudo+"/"+currentUser).set(true);

    loadSidebar();
    selectDM(pseudo);
  });
}

// =========================
// CLAVIER MOBILE (WhatsApp style)
// =========================
if(window.visualViewport){
  visualViewport.addEventListener("resize",()=>{
    const offset = window.innerHeight - visualViewport.height;
    document.getElementById("inputBar").style.bottom = (56 + offset) + "px";
    messagesDiv.style.paddingBottom = (offset + 20) + "px";
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  });
}

// =========================
// EVENTS
// =========================
sendBtn.onclick=sendMessage;
messageInput.onkeydown=e=>{if(e.key==="Enter") sendMessage()};

addContactBtn.onclick=addContact;
logoutBtn.onclick=logout;

registerBtn.onclick=register;
loginBtn.onclick=login;

// =========================
// INIT
// =========================
autoLogin();
</script>
